# Домашнее задание к занятию "6.1. Типы и структура СУБД

## Задача 1
Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.  
Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:  
* Электронные чеки в json виде

Для данного кейса лучше подойдёт документо-ориентированная СУБД. 
* Склады и автомобильные дороги для логистической компании

Думаю, что реляционная СУБД будет лучшим решением для данного кейса. 
* Генеалогические деревья

Для данного кейса подойдёт иерархическая СУБД, имеющая древовидную структуру. 
* Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации

Для этого подойдёт Memcached или Redis, т.к. поддерживают TTL и отлично подходят в качестве инструментов кэширования.
* Отношения клиент-покупка для интернет-магазина

Для этого кейса подойдёт система "ключ-значение". Например, Redis.

## Задача 2
Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

* Данные записываются на все узлы с задержкой до часа (асинхронная запись)

По CAP это СУБД типа PA, т.к. согласованность данных в моменте не достигается.
* При сетевых сбоях, система может разделиться на 2 раздельных кластера

Это PA СУБД, т.к. система устойчива к разделению (P), система будет доступна (A), но при разделение на два кластера вряд ли будет возможна согласованность данных (C).
* Система может не прислать корректный ответ или сбросить соединение

Данный пункт мне слабо понятен, но предположу, что если система сбрасывает соединение, то у неё отсутствует доступность (A), а значит это PC.   

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?  
Дать ответ на вопрос по PACELC довольно сложно, т.к. слишком мало входных данных для каждого из кейсов. Предположу, что это:
* PA/EL (т.к. нет согласованности данных в моменте)
* Тут возможны как PA/EL, так и PA/EC в зависимости от бизнес процесса. 
* PC/EC (т.к. соединение сбросится, значит мы не получим ответ быстро и L (задержка) не будет выполнено).

## Задача 3
Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?  
В рамках одной СУБД не могут, это противоречит PACELC. Но допускается совмещение разных СУБД в рамках одного проекта для реализации конкретных бизнес потребностей.

## Задача 4
Вам дали задачу написать системное решение, основой которого бы послужили:

* фиксация некоторых значений с временем жизни
* реакция на истечение таймаута


Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?  
Данным требованиям удовлетворяет Redis. Это СУБД типа "ключ-значение", имеющая поддержку pub/sub и TTL. Для правильной работы Redis надо:
* Хранить только те данные, которые можно быстро восстановить в случае потерь.
* Не использовать персистентность Redis.
* Следить за шардингом.
* Использовать эффективный сериализатор.
